CREATE TABLE `events` (`id` INT NOT NULL AUTO_INCREMENT , `SentDateTime` DATETIME NOT NULL , `EventType` VARCHAR(32) NOT NULL , `SessionId` VARCHAR(16) NULL , `ReferralId` VARCHAR(24) NULL , `Username` VARCHAR(256) NULL, `Name` VARCHAR(128) NULL, `Company` VARCHAR(128) NULL , `Password` VARCHAR(64) NULL , `SecurityQuestion` VARCHAR(256) NULL , `SecurityAnswer` VARCHAR(64) NULL , `Clue` VARCHAR(256) NULL , `AttemptCount` INT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE VIEW sessions AS SELECT sessionId, name, company, username, MAX(attemptCount) attemptCount, MAX(SentDateTime) sentDateTime FROM events GROUP BY sessionId;
